<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>join</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/side/modal.css}" >
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/join.css">
  <script th:src="@{http://code.jquery.com/jquery-3.5.1.min.js}"></script>
  <script th:src="@{/js/side/modal.js}"></script>
  <script>
    window.onload = function() {
      function show1 () {
        document.querySelector(".black_bg").className = "black_bg show1";
      }
      function close1 () {
        document.querySelector(".black_bg").className = "black_bg";
      }
      document.querySelector("#modal_btn").addEventListener("click", show1);
      document.querySelector(".black_bg").addEventListener("click", close1);
    }
    function gomember(){
      location.href =  "/web/admin_member.do";
    }
    function gojoin(){
      location.href =  "/web/join.do";
    }
    function gorecord(){
      location.href =  "/web/admin.do";
    }
  </script>

</head>
<body bgcolor="EFEFEF">

<th:block th:replace="sidebar/modal :: sideModal">
  <th:block layout:fragment="css"></th:block>
  <th:block layout:fragment="script"></th:block>
</th:block>
<th:block th:replace="top/top :: topModal">
</th:block>
<div align="center" style="width:100%; height:300px;">

  <input id="join" style="width:800px; height:150px;" class="button" type = "submit" value ="회원 가입">

</div>

<form action="/web/insertJoin.do" method = "POST">

  <div class="middle">
    <table class="joinTable">
      <tr>
        <td> <input name = "user_name" id="user_name" type="text" placeholder="이름"> </td>
      </tr>
      <tr>
        <td> <input name = "user_birthdate"id="user_birthdate" type="text" placeholder="생년월일"> </td>
      </tr>
      <tr>
        <td> <input name = "user_phone"id="user_birthdate" type="text" placeholder="핸드폰 번호"> </td>
      </tr>
      <tr>
        <td> <input name="user_expire_date" id="user_joindate" type="text" placeholder="개월 수"> </td>
      </tr>
      <tr>
        <td>
          <div class="select" data-role="selectBox" name="exercise" id="user_gym" onclick = "test()">
                     <span date-value="optValue" class="selected-option">
                        <!-- 선택된 옵션 값이 출력되는 부분 -->
                     </span>
            <!-- 옵션 영역 -->
            <ul class="hide" id="wrap">
              <li class ="강남점">강남점</li>
              <li class ="해운대점">해운대점</li>
              <li class ="광주남구">광주남구</li>
            </ul>
          </div>
          <div id="choice">지점명</div>
        </td>
      </tr>
    </table>

    <div style="width:100%; height:200px;   margin-top:100px;">
      <table>
        <tr>
          <td id="videos" style="width:76%">
            <div style="font-size:40px"><input name = "video_yn" type='checkbox' value = "1" style="width:80px; height:80px;"
                                               class="button"></div>
            <c style="font-size: 40px;">영상 제공 동의</c></td>
          <td>
            <div><input id="button" style="font-size:45px;" class="button" type = "submit" value ="제출"></div></td>
        </tr>
      </table>
    </div>
  </div>
</form>
<script type="text/javascript"> /* 셀렉트 */
const body = document.querySelector('body');
const select = document.querySelector(`[data-role="selectBox"]`);
const values = select.querySelector(`[date-value="optValue"]`);
const option = select.querySelector('ul');
const opts = option.querySelectorAll('li');
const choice = document.querySelector('#choice');

/* 셀렉트영역 클릭 시 옵션 숨기기, 보이기 */
function selects(e){
  e.stopPropagation();
  option.setAttribute('style',`top:${select.offsetHeight}px`)
  if(option.classList.contains('hide')){
    option.classList.remove('hide');
    option.classList.add('show');
  }else{
    option.classList.add('hide');
    option.classList.remove('show');
  }
  selectOpt();
  choice.classList.add('hide');
}

/* 옵션선택 */
function selectOpt(){
  opts.forEach(opt=>{
    const innerValue = opt.innerHTML;
    function changeValue(){
      var html = innerValue+"<input type = 'hidden' value = '"+innerValue+"' name ='user_gym'></input>"
      values.innerHTML = html;
    }
    opt.addEventListener('click',changeValue)
  });
}

/* 선택시 div보이게 */


/* 렌더링 시 옵션의 첫번째 항목 기본 선택 */
function selectFirst(){
  const firstValue = opts[0].innerHTML;
  values.innerHTML = `${firstValue}`
}



/* 옵션밖의 영역(=바디) 클릭 시 옵션 숨김 */
function hideSelect(){
  if(option.classList.contains('show')){
    option.classList.add('hide');
    option.classList.remove('show');
  }
}

selectFirst();
select.addEventListener('click',selects);
body.addEventListener('click',hideSelect);
</script>
</html>